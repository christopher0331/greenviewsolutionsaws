/**
 * React Router v6.4.0-pre.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
import{invariant as e,resolveTo as t,getToPathname as n,joinPaths as r,matchPath as a,parsePath as o,matchRoutes as i,isRouteErrorResponse as l,createMemoryRouter as u,createMemoryHistory as s,normalizePathname as c,stripBasename as p,Action as h}from"@remix-run/router";export{Action as NavigationType,createPath,generatePath,isRouteErrorResponse,json,matchPath,matchRoutes,parsePath,redirect,resolvePath}from"@remix-run/router";import*as m from"react";const d="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},{useState:f,useEffect:v,useLayoutEffect:g,useDebugValue:E}=m;function x(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!d(n,e)}catch(r){return!0}}const y=!!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?function(e,t,n){return t()}:function(e,t,n){const r=t(),[{inst:a},o]=f({inst:{value:r,getSnapshot:t}});return g((()=>{a.value=r,a.getSnapshot=t,x(a)&&o({inst:a})}),[e,r,t]),v((()=>{x(a)&&o({inst:a});return e((()=>{x(a)&&o({inst:a})}))}),[e]),E(r),r},C="useSyncExternalStore"in m?m.useSyncExternalStore:y,S=m.createContext(null),R=m.createContext(null),b=m.createContext(null),U=m.createContext(null),D=m.createContext({outlet:null,matches:[]}),N=m.createContext(null);function P(t){w()||e(!1);let{basename:a,navigator:o}=m.useContext(b),{hash:i,pathname:l,search:u}=j(t),s=l;if("/"!==a){let e=n(t),o=null!=e&&e.endsWith("/");s="/"===l?a+(o?"/":""):r([a,l])}return o.createHref({pathname:s,search:u,hash:i})}function w(){return null!=m.useContext(U)}function A(){return w()||e(!1),m.useContext(U).location}function F(){return m.useContext(U).navigationType}function M(t){w()||e(!1);let{pathname:n}=A();return m.useMemo((()=>a(t,n)),[n,t])}function k(){w()||e(!1);let{basename:n,navigator:a}=m.useContext(b),{matches:o}=m.useContext(D),{pathname:i}=A(),l=o.filter(((e,t)=>0===t||e.pathnameBase!==o[t-1].pathnameBase));o.length>0&&o[o.length-1].route.index&&l.pop();let u=JSON.stringify(l.map((e=>e.pathnameBase))),s=m.useRef(!1);return m.useEffect((()=>{s.current=!0})),m.useCallback(((e,o={})=>{if(!s.current)return;if("number"==typeof e)return void a.go(e);let l=t(e,JSON.parse(u),i);"/"!==n&&(l.pathname=r([n,l.pathname])),(o.replace?a.replace:a.push)(l,o.state,o)}),[n,a,u,i])}const O=m.createContext(null);function L(){return m.useContext(O)}function B(e){let t=m.useContext(D).outlet;return t?m.createElement(O.Provider,{value:e},t):t}function T(){let{matches:e}=m.useContext(D),t=e[e.length-1];return t?t.params:{}}function j(e){let{matches:n}=m.useContext(D),{pathname:r}=A(),a=JSON.stringify(n.map((e=>e.pathnameBase)));return m.useMemo((()=>t(e,JSON.parse(a),r)),[e,a,r])}function _(t,n){w()||e(!1);let a=m.useContext(R),{matches:l}=m.useContext(D),u=l[l.length-1],s=u?u.params:{};!u||u.pathname;let c=u?u.pathnameBase:"/";u&&u.route;let p,h=A();if(n){let t="string"==typeof n?o(n):n;"/"===c||t.pathname?.startsWith(c)||e(!1),p=t}else p=h;let d=p.pathname||"/",f="/"===c?d:d.slice(c.length)||"/",v=i(t,{pathname:f});return H(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:r([c,e.pathname]),pathnameBase:"/"===e.pathnameBase?c:r([c,e.pathnameBase])}))),l,a||void 0)}function I(){let e=K(),t=l(e)?`${e.status} ${e.statusText}`:e?.message||JSON.stringify(e),n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unhandled Thrown Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),e?.stack?m.createElement("pre",{style:r},e?.stack):null,m.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your ownÂ ",m.createElement("code",{style:a},"errorElement")," props onÂ ",m.createElement("code",{style:a},"<Route>")))}class J extends m.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?m.createElement(N.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function H(t,n=[],r){if(null==t){if(!r?.errors)return null;t=r.matches}let a=t,o=r?.errors;if(null!=o){let t=a.findIndex((e=>e.route.id&&o?.[e.route.id]));t>=0||e(!1),a=a.slice(0,Math.min(a.length,t+1))}return a.reduceRight(((e,t,i)=>{let l=t.route.id?o?.[t.route.id]:null,u=r?t.route.errorElement||m.createElement(I,null):null,s=()=>m.createElement(D.Provider,{children:l?u:void 0!==t.route.element?t.route.element:e,value:{outlet:e,matches:n.concat(a.slice(0,i+1))}});return r&&(t.route.errorElement||0===i)?m.createElement(J,{location:r.location,component:u,error:l,children:s()}):s()}),null)}var z;function V(t){let n=m.useContext(R);return n||e(!1),n}function W(){return V(z.UseNavigation).navigation}function $(){let t=m.useContext(S);t||e(!1);let n=V(z.UseRevalidator);return{revalidate:t.revalidate,state:n.revalidation}}function X(){let{matches:e,loaderData:t}=V(z.UseMatches);return m.useMemo((()=>e.map((e=>{let{pathname:n,params:r}=e;return{id:e.route.id,pathname:n,params:r,data:t[e.route.id],handle:e.route.handle}}))),[e,t])}function Y(){let t=V(z.UseLoaderData),n=m.useContext(D);n||e(!1);let r=n.matches[n.matches.length-1];return r.route.id||e(!1),t.loaderData?.[r.route.id]}function q(e){return V(z.UseRouteLoaderData).loaderData?.[e]}function G(){let t=V(z.UseActionData);return m.useContext(D)||e(!1),Object.values(t?.actionData||{})[0]}function K(){let t=m.useContext(N),n=V(z.UseRouteError),r=m.useContext(D),a=r.matches[r.matches.length-1];return t||(r||e(!1),a.route.id||e(!1),n.errors?.[a.route.id])}let Q;function Z(){Q=null}function ee({children:e,fallbackElement:t,routes:n,createRouter:r}){Q||(Q=r(n||se(e)).initialize());let a=Q,o=C(a.subscribe,(()=>a.state)),i=m.useMemo((()=>({createHref:a.createHref,go:e=>a.navigate(e),push:(e,t,n)=>a.navigate(e,{state:t,resetScroll:n?.resetScroll}),replace:(e,t,n)=>a.navigate(e,{replace:!0,state:t,resetScroll:n?.resetScroll})})),[a]);return o.initialized?m.createElement(S.Provider,{value:a},m.createElement(R.Provider,{value:o},m.createElement(ie,{location:o.location,navigationType:o.historyAction,navigator:i},m.createElement(ue,{routes:n,children:e})))):m.createElement(m.Fragment,null,t)}function te({children:e,initialEntries:t,initialIndex:n,hydrationData:r,fallbackElement:a,routes:o}){return ee({children:e,fallbackElement:a,routes:o,createRouter:e=>u({initialEntries:t,initialIndex:n,routes:e,hydrationData:r})})}function ne({basename:e,children:t,initialEntries:n,initialIndex:r}){let a=m.useRef();null==a.current&&(a.current=s({initialEntries:n,initialIndex:r,v5Compat:!0}));let o=a.current,[i,l]=m.useState({action:o.action,location:o.location});return m.useLayoutEffect((()=>o.listen(l)),[o]),m.createElement(ie,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:o})}function re({to:t,replace:n,state:r}){w()||e(!1);let a=k();return m.useEffect((()=>{a(t,{replace:n,state:r})})),null}function ae(e){return B(e.context)}function oe(t){e(!1)}function ie({basename:t="/",children:n=null,location:r,navigationType:a=h.Pop,navigator:i,static:l=!1}){w()&&e(!1);let u=c(t),s=m.useMemo((()=>({basename:u,navigator:i,static:l})),[u,i,l]);"string"==typeof r&&(r=o(r));let{pathname:d="/",search:f="",hash:v="",state:g=null,key:E="default"}=r,x=m.useMemo((()=>{let e=p(d,u);return null==e?null:{pathname:e,search:f,hash:v,state:g,key:E}}),[u,d,f,v,g,E]);return null==x?null:m.createElement(b.Provider,{value:s},m.createElement(U.Provider,{children:n,value:{location:x,navigationType:a}}))}function le({children:e,location:t}){return _(se(e),t)}function ue({children:e,location:t,routes:n}){return _(n||se(e),t)}function se(t,n=[]){let r=[];return m.Children.forEach(t,((t,a)=>{if(!m.isValidElement(t))return;if(t.type===m.Fragment)return void r.push.apply(r,se(t.props.children,n));t.type!==oe&&e(!1);let o=[...n,a],i={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(i.children=se(t.props.children,o)),r.push(i)})),r}function ce(e){return H(e)}!function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(z||(z={}));export{te as DataMemoryRouter,ne as MemoryRouter,re as Navigate,ae as Outlet,oe as Route,ie as Router,le as Routes,S as UNSAFE_DataRouterContext,R as UNSAFE_DataRouterStateContext,U as UNSAFE_LocationContext,b as UNSAFE_NavigationContext,D as UNSAFE_RouteContext,Z as UNSAFE_resetModuleScope,se as createRoutesFromChildren,ce as renderMatches,G as useActionData,P as useHref,w as useInRouterContext,Y as useLoaderData,A as useLocation,M as useMatch,X as useMatches,k as useNavigate,W as useNavigation,F as useNavigationType,B as useOutlet,L as useOutletContext,T as useParams,ee as useRenderDataRouter,j as useResolvedPath,$ as useRevalidator,K as useRouteError,q as useRouteLoaderData,_ as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
